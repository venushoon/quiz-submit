<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì‹¤ì‹œê°„ í€´ì¦ˆ</title>

  <!-- ê¸°ì¡´ app.css(ë””ìžì¸) ê·¸ëŒ€ë¡œ ì‚¬ìš© -->
  <link rel="stylesheet" href="./app.css" />
</head>
<body>

  <!-- ìƒë‹¨ë°”/íƒ­/íŒ¨ë„ ë“±, ê¸°ì¡´ index(ë””ìžì¸).htmlì˜ ë§ˆí¬ì—…ì„ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤ -->
  <!-- (ì—¬ê¸°ì—” ì—¬ëŸ¬ë¶„ì˜ ì™„ì„±ëœ ë ˆì´ì•„ì›ƒ/ID ë“¤ì´ ì´ë¯¸ ì¡´ìž¬í•œë‹¤ê³  ê°€ì •) -->

  <!-- Firebase compat (ë°˜ë“œì‹œ app.jsë³´ë‹¤ ë¨¼ì €) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Firestoreë¥¼ ëª¨ë“ˆì²˜ëŸ¼ ì“°ê¸° ìœ„í•œ ì–‡ì€ ëž˜í¼(window.FS) -->
  <script>
    // ðŸ”§ ì—¬ê¸°ì— ì—¬ëŸ¬ë¶„ í”„ë¡œì íŠ¸ì˜ ì‹¤ì œ Firebase ì„¤ì •ì„ ìž…ë ¥í•˜ì„¸ìš”
    const firebaseConfig = {
      apiKey: "AIzaSyCClNc95ykYCudmLHTPgpewZ60bZ8zukbo",
      authDomain: "live-quiz-a14d1.firebaseapp.com",
      projectId: "live-quiz-a14d1"
    };
    firebase.initializeApp(firebaseConfig);
    window.db = firebase.firestore();

    // compat APIë¥¼ ëª¨ë“ˆì‹ìœ¼ë¡œ í‰ë‚´ ë‚´ëŠ” ëž˜í¼
    window.FS = {
      doc: (...path) => {
        // doc(db,"rooms",id)ì²˜ëŸ¼ ì“°ê³  ì‹¶ì–´ì„œ ê°„ë‹¨ížˆ ë§¤í•‘
        let ref = window.db;
        for (let i = 0; i < path.length; i += 2) {
          const col = path[i], id = path[i + 1];
          ref = ref.collection(col);
          if (id) ref = ref.doc(id);
        }
        return ref;
      },
      collection: (db, col, ...rest) => {
        let ref = window.db.collection(col);
        for (let i = 0; i < rest.length; i += 2) {
          ref = ref.doc(rest[i]).collection(rest[i + 1]);
        }
        return ref;
      },
      setDoc: (ref, data, opt) => (opt && opt.merge) ? ref.set(data, { merge: true }) : ref.set(data),
      getDoc: (ref) => ref.get(),
      getDocs: (ref) => ref.get(),
      onSnapshot: (ref, handler) => ref.onSnapshot(handler),
      updateDoc: (ref, data) => ref.update(data),
      runTransaction: (db, fn) => window.db.runTransaction(fn),
      serverTimestamp: () => firebase.firestore.FieldValue.serverTimestamp()
    };
  </script>

  <!-- QR ì½”ë“œ (ë°˜ë“œì‹œ app.jsë³´ë‹¤ ë¨¼ì €) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <!-- ì•± ìŠ¤í¬ë¦½íŠ¸ (í•­ìƒ ë§ˆì§€ë§‰, ë‹¨ í•œ ë²ˆë§Œ í¬í•¨) -->
  <script src="./app.js"></script>
</body>
</html>
