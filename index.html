<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>실시간 퀴즈</title>

  <!-- 기존 app.css(디자인) 그대로 사용 -->
  <link rel="stylesheet" href="./app.css" />
</head>
<body>

  <!-- 상단바/탭/패널 등, 기존 index(디자인).html의 마크업을 그대로 둡니다 -->
  <!-- (여기엔 여러분의 완성된 레이아웃/ID 들이 이미 존재한다고 가정) -->

  <!-- Firebase compat (반드시 app.js보다 먼저) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Firestore를 모듈처럼 쓰기 위한 얇은 래퍼(window.FS) -->
  <script>
    // 🔧 여기에 여러분 프로젝트의 실제 Firebase 설정을 입력하세요
    const firebaseConfig = {
      apiKey: "AIzaSyCClNc95ykYCudmLHTPgpewZ60bZ8zukbo",
      authDomain: "live-quiz-a14d1.firebaseapp.com",
      projectId: "live-quiz-a14d1"
    };
    firebase.initializeApp(firebaseConfig);
    window.db = firebase.firestore();

    // compat API를 모듈식으로 흉내 내는 래퍼
    window.FS = {
      doc: (...path) => {
        // doc(db,"rooms",id)처럼 쓰고 싶어서 간단히 매핑
        let ref = window.db;
        for (let i = 0; i < path.length; i += 2) {
          const col = path[i], id = path[i + 1];
          ref = ref.collection(col);
          if (id) ref = ref.doc(id);
        }
        return ref;
      },
      collection: (db, col, ...rest) => {
        let ref = window.db.collection(col);
        for (let i = 0; i < rest.length; i += 2) {
          ref = ref.doc(rest[i]).collection(rest[i + 1]);
        }
        return ref;
      },
      setDoc: (ref, data, opt) => (opt && opt.merge) ? ref.set(data, { merge: true }) : ref.set(data),
      getDoc: (ref) => ref.get(),
      getDocs: (ref) => ref.get(),
      onSnapshot: (ref, handler) => ref.onSnapshot(handler),
      updateDoc: (ref, data) => ref.update(data),
      runTransaction: (db, fn) => window.db.runTransaction(fn),
      serverTimestamp: () => firebase.firestore.FieldValue.serverTimestamp()
    };
  </script>

  <!-- QR 코드 (반드시 app.js보다 먼저) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <!-- 앱 스크립트 (항상 마지막, 단 한 번만 포함) -->
  <script src="./app.js"></script>
</body>
</html>
